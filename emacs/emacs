;;; BASICS
;; Cant handle this ugly screen
(setq inhibit-startup-message t)
(setq initial-scratch-message ";; Hello Jo√£o")
;; Can I use escape to, idk, ESCAPE!
(global-set-key (kbd "<escape>") 'keyboard-escape-quit)
;; Yes or no? More like y or n 
(defalias 'yes-or-no-p 'y-or-n-p)
;; I like line numbers
(setq display-line-numbers-type 'relative)
(global-display-line-numbers-mode 1)
;; Remove bars
(menu-bar-mode -1)
(tool-bar-mode -1)
(scroll-bar-mode -1)
;; No autosave and no backup pls
(setq auto-save-default nil)
(setq create-lockfiles nil)
(setq make-backup-files nil)
;; Stop it, emacs-san, dont put it in there
(setq custom-file (expand-file-name "custom.el" user-emacs-directory))
;; Use emacs default project manager
(require 'project)
;; Function to set my fonts
(setq favorite-font "JetBrainsMono Nerd Font")
(defun set-font-faces (font-face height) 
    (set-face-attribute 'default nil :font font-face :height height)
    (set-face-attribute 'variable-pitch nil :font font-face :height 120))
(if (member favorite-font (font-family-list))
    (set-font-faces favorite-font 120)
    (set-face-attribute 'default nil :height 120)
    (set-face-attribute 'variable-pitch nil :height 120))

;;; PACKAGES
;; Activate package manager
(require 'package)
(add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/"))
(unless (package-installed-p 'use-package)
  (package-refresh-contents)
  (package-install 'use-package))
;; Use package to use packages
(require 'use-package)
(setq use-package-always-ensure t) ;; install all packages
;; Ido because tsoding recommended
(require 'ido)
(ido-mode 1)
;; Lets get evil
(setq evil-want-keybinding nil)
(use-package evil
  :init 
  (setq evil-want-integration t)
  :ensure t
  :config
  (evil-mode 1))
(use-package evil-collection
  :after evil
  :diminish
  :config
  (evil-collection-init))
;; I need to be shown some keybindings
(use-package which-key
  :diminish
  :init
  (setq which-key-delay 0.3)
  :config
  (which-key-mode))
;; The best plugin ever
(use-package magit
  :bind ("C-x g" . magit-status))
;; Good completions
(use-package counsel
  :bind (("C-s" . swiper)
	 ("M-x" . counsel-M-x)
	 ("C-x b" . counsel-ibuffer)
	 ("C-x C-f" . counsel-find-file)))
;; Lets get some themes
(use-package doom-themes
  :config
  (load-theme 'doom-tokyo-night t))
(use-package mood-line
  :config
  (mood-line-mode))
;; Define keybindings, general
(use-package general)
(general-evil-setup t)
;; * Mode Keybindings
(nmap
  :keymaps 'emacs-lisp-mode-map
  "K" 'elisp-slime-nav-describe-elisp-thing-at-point)
;; Bring some of my vim keybindings here (this is evil)
(nmap
 :prefix "SPC"
 "n g" 'magit-status
 "q" 'kill-buffer
 "b" 'counsel-ibuffer
 "e" 'dired)
;; Use q to quit commit editing
(nmap
  :keymaps 'with-editor-mode-map
  "q" 'with-editor-finish)
