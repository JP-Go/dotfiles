# vim: ft=bash

# Set nvim as the default terminal editor
export EDITOR=nvim
export VISUAL=nvim

# Configure TeX enviroment variables
TEXMFDIST=/usr/share/texmf-dist
TEXMFLOCAL=/usr/local/share/texmf:/usr/share/texmf
TEXMFSYSVAR=/var/lib/texmf
TEXMFSYSCONFIG=/etc/texmf
TEXMFHOME=~/texmf
TEXMFVAR=~/.texlive/texmf-var
TEXMFCONFIG=~/.texlive/texmf-config

# Add perl scripts, ruby gems and cargo packages(rust) to PATH
PATH=$PATH:/home/jp/.cargo/bin:/home/jp/.local/share/gem/ruby/3.0.0/bin
PATH="/home/jp/perl5/bin${PATH:+:${PATH}}"; 
if [[ -f $HOME/.cargo/env ]]; then . "$HOME/.cargo/env";fi
# Add yarn or npm downloaded binaries to path
if [[ -d $HOME/.yarn/bin ]]; then PATH=$PATH:$HOME/.yarn/bin;fi
if [[ -d $HOME/.npm/bin ]]; then PATH=$PATH:$HOME/.npm/bin;fi
if [[ -d $HOME/.local/bin ]]; then PATH=$PATH:$HOME/.local/bin;fi
# Add some perl env variables
PERL5LIB="/home/jp/perl5/lib/perl5${PERL5LIB:+:${PERL5LIB}}"; export PERL5LIB;
PERL_LOCAL_LIB_ROOT="/home/jp/perl5${PERL_LOCAL_LIB_ROOT:+:${PERL_LOCAL_LIB_ROOT}}"; export PERL_LOCAL_LIB_ROOT;
PERL_MB_OPT="--install_base \"/home/jp/perl5\""; export PERL_MB_OPT;
PERL_MM_OPT="INSTALL_BASE=/home/jp/perl5"; export PERL_MM_OPT;

# Show git branch in PS1
parse_git_branch() {
    local branch=$(git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/')
    if [[ $branch ]]; then
        echo " git:${branch/ /}"
    fi
}

# Add C libs in usr/local/lib
export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/local/lib

# Add Java related env vars
export JDTLS_HOME=$HOME/.local/lib/java-lsp
export JAVA_HOME=/usr/lib64/jvm/default
